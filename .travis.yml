dist: xenial
language: go
go:
  - 1.12.x
  - master
cache: false
env:
  global:
    - GO111MODULE=on
    # - ALGORAND_HOST=127.0.0.1
    # - ALGOD_PORT=8080
    # - KMD_PORT=8081
    # - ALGOD_TOKEN=374de74fa794248762e5a
    # - KMD_TOKEN=be84aa55f61665645ed68
    # - AWS_ACCESS_KEY_ID=AKIAA55F6166
    # - AWS_SECRET_ACCESS_KEY=mg0cGd49Yof8vQBnVSw6I
    - secure: sR+VrLXUVSHRJoJv6zBYgqEeplhGFkKyJV88BwGhUtC7eHFDRHNsnPTWm0OZ1rLSXs7bu2ycFrc8y5XQ6T4Vqh3Ezb2T5K8HIHFtNnPOLOUxFod3cXXE6tfxB0hGKMkj4BU0GQ6X4wiKCzG5C0oeLRtXY6hkny2TkQzAoQ2cLSYlp2yCfEfNR0U5IxiJo6KmWbUIlL4xLUg0Ur/fU44LdGSUOmm4n/+0TVVx5iMXfSCICMAtorxdbGIhdhAECpts4hfIxHCYLdhkFpaCHh6astniygHdl2Ntb89klplZsLF+nmrpEGWLTSalQvGhh4/Q3buhgfPsoJlDsAAUMWNdDj9qngbamf+BDqqQZXx2MxPHPoaFeY4ejT46j6Ldh8xr27UXHf7r3iiir0RwBDU6JezKoqgGfN+MVMzlmY2EtpgaMjDQcH7aFp+31fIZMX/26DTqd3diUSDfGQfEw2VNitg6lR2YNpdopRrMIgTOIuoRQPQfusx47fxsVBeS3NRSLCxWXX0d9ao4o2Ls4RYqhiD6ly9bEpgXmorM0f+bXcdChAT2sal4OsRS2hpIrddST66EX8uLxjm/kaZykZRNLwujZE5O5EVCqAefWqqTpEKMVFspujke4tIgQSkzzNvauLxUxZuMUYlCDoHpBGgoMbUuE3aI1lx2yEB02xYWA3c=
    - secure: HamxXXgBtx6K7Mg+dx4B733jqHcGVpTOsnrTBb3Xn1ucA2VfuKFQkWb5fnwzB2Q1MTHn2mMFwNQ81voJgJtRLTUI9Gl6Ou9bOffoh6yYCZBWLvpdA85OquACqK8Fp45mYPkFqfvOMRsAhRJ3MY9nbEUBkMK8+VO8GJxDyzAxB6VZfCeGWPMQLpOFkuBNrtmMozEgEauxV5BynCegORUUY+EHl4/hO0Z/SloEA+Z94xaMuGiLIS4bsgQDWG1gBQfSUcBvUfOmL2kGbfiDNEinOAfoL2tekFLz7rneY7pzxQOdRyKw0sQ/oYYrDXKG0ZzkoWwQWmSjdwPMjef19wJkXgCvls8jLtD1KWL9y9v7cJEyu/TzRCsscHUWb4muIb3rMFuqfZnQ1O5QTRmcAy57XQqF4Dgii9o3Q6u3ai1dtb7GE9PB6nayamN5nn54M3zGcOYATVFedHTt92K8MYd5PlIHCe2cTHmMqD+VL99nZkhH+YDdcDDBOolS3DM3Joiu710qiPr6pWg8S5grZnLmB936N0LdMr/9TZv0u8RQwu+QlEpdUusGGDTBoIrNennAZznkeUcaRagvuuntjj5pN+UhYn/IIjcT1KFUM4Dp1nYOZMl3IMRtvXQrcPP4gQjYVPFMpqL/s1/lRSgyedSzno4OOxSeAsLKXJfP0BzGNnM=
    - secure: eNy0UCr5yC0E5w5G2cmjaAqUNyYp9ASWnbZpAZz/Q6RY+85MVgMUwlCMi4k7Y/XzDBS1MwGKojEurngTA54USPIaJVr0qlebGi9lOZBwPGhNrJT1XMibTXg+98xd5TQbn8ja+1sGgZ4Bd8u9dDUJMcbMtxd3YmvkL554wZDECC+BFN/td+jxpi7ayT22UPiDe3JfP8Zbjmh0CZQQH7lZvcPYLb0UKhoybmtOWm1OJgSxOD7F4l7HhOQ/WzfroZrqsMEr3LkP5jTN0JT+1PewKF0WlkqpM66+Q49OL1dayH/LnsT8LrEU4oQxeLJjFsH7OwlQg1bAdgNtEtVY8EeZG3i+CddpHl2v8nMnfMT0aFjIaoWn1G6J695fYyABa5dRY4/Nv6fagByCEFtUe8c7Anq3+Ytd6WVoh8ohPzk7GhDfpEWDlEyMelXmPLc2tCyAHlBogNhm+R96t0XJXVqJN7ouxyvAOL3pfoB/kB7qqchJzTQvabNFYkznccLG+XJZ9l1ECn8rY6/lUOTAM4s6Q3uKVdkdbmFHjoHRkaRe2iMcqULpD5gN+izWKK2+n8IeEmh24GjJQWZZP3eD/PyhiULMTQyqQjRGKOmnbHSZQdP2GVa31/aV+sheVaCp3gVZJnm/jVMM06D0Mr+i5BU52AhM3i5sTTUhATorIlIA0Xs=
    - secure: HS17YCmWPNQusCjGS+ZnDt1nvVKocbX1/mg0cGd+9Yof8vQBnVSw6IzwNCeKqL+4dGQ3p/FYP0rmpAKUZ6JLX1TwuoEAKfYDsmI9uWGYc9AG/i9xI64ufBsi8R2peFIMHFAkO5NW7xEL+1CNAPaJTdoiFtl53IaimZRfrIbrzI/XAfM335DDyW3RU+efLEIRc1jjgGD5gTFy6JGlXKgtY2EazjBbPRvdq5aIzsevYkYPUoNAASH1CbWtAueEWitOYMrERLcc50MznAw/0CP6/EN3Z/6jJ2VmJWgM29pf/9Dp2ZTd6AXgSGvXlsDWWMxfLvCweBffWCbfbBBCfKekL7q44SntQtobd5xA73557SqfAABYPfqevTP8KCWVpat82aM6mfH3pQz2dhQ47zCiyscAX9hiewJYM0wWkjXztpa8w9PrjfciiO2SuZSoqboCXKJSQ/ausTFrnCQ0JpC1O45Z9vaChEOh0j8FqWcnH+heU/KFzXvWo9hZnn3pMcqwPgK4+Z7eu+s5zY2ZRCmtOKKrXhD8OO2XSvhYST6EhpBJgtGVs15D1mAKZsXAKpxuT1eVeWQDY2j6/FRZ+EXM5jR2SPgGz8Us3vOosX60cnrK1fLnYMXWFO/BJWbM0iZNiBuB4kRPusNuTmR9XHym5gQ6xoJTCuqcVvxP8NUf0mY=
    - secure: J/RfWUNniOseo/GYIs/+xeyVx8qXrhupHu8eJkVtUfEHq5fwEJ4pwaipSWUsetrG3me3/U7BHJRLKuvR4/iX6O23lwsRpyGkdUlw5FxTtnAaTSiGQPIYIxhL8Rgoir1lMBi+m6Tvqqk6sLnTGITyWYZK140UzFXyW1ejvDbwcR/0bHL/ekucJnT1Dzmw7P3R1OZ3c1QwM9rXibv5+oycBCjAYtfZgN8LSEv091DleIpEAZky2cIF71GYJsGRuiyvC/59dAphk+PbG9xf7TY4tortVi16BoO54yLNRCtjFNlJ8RKz8TdeVjb8SXLo/IHx1K9xi8Sc1bYcmQaQ+OofcXpcVCPfMxnl4c3HR5V3FuWBAztBeuY0NsTEoSjsQIF54KAdoCdWBCqT4xxqm9sh9MbfW+PTXaya73276Gq2V/+gOBdGhezGvGnFjF8xkhIRwiTRBgIG5Bz0apwbXuksjLJ5aIx2ntQqyF7d/mFevhrgAZOBruxtLKFTfjg6K9Keigx3PqmPrpJenkgf4QbPRsXp+RkSEnfYPcvKTmlgcnHTYReYVdAEQ4P+NtuwdQMw+ox1UaYrLQV4e7APV3X3dd76Zz4SnDvyzXqbipJIRhpKN4ERVGkffMF1jhuCNF6maDyk4i+4F+cenS+YxCg39zo8age+nrvlZF0HKNQ4B7s=
    - secure: i79zjdHgEnZOOhj8zdjcUhuZ9/vBuS9hCxNtxUua9tfr4ogHumK9W0K2bQPsWm+GvhDnBod/Cwq/kMTQvC0XGWTD8m1tGSK92MMVeXWDtGzzsolpy3YT/65FXk/kNnA0gaAUxcBU7H1OzlR1F80M9Gffb23favhgkkMAi+nUfUv0FjB5o/U33A5xQZ6lorYeKsmuGb+5EI2oADbVeFHkztMcZ9+T0JHpNmVu/uhSRxYUY2+/SO1OuNQrawd116DjrR3vOBfjoM3zbWMtOZu5hgGdI8BsGThIfLdP/tZ0N8bH7psK8RsXKr+Fj8nBUyC16SXKYcffKqlDJoWc60u+8AwbN1srldozXmsfi7W02VAiFL3mVWuK6wWYpO0hCndZGNkjfJ4eEsRHtCTd0v7XW9apb4j6gtXEuw2YGqp/CYO8E331g0oRs2T+2/yXk3ziFokFHEi9yjcEcd07sKir9eqMULBT737+5yuMsmQftPbRZUeUcQw+CyACU/PKQOjHmBLlXvPzXUG2SxwYCUHxvgeHY5FOdCNqCDU1qa1IT/WpUxtsCbyajB0BM+y3pouJ3X0l5ZxUQxYbOruf/2bq7FJ4KMsZcSyJDnrBOG0hfc8ysmE7S1ZUuNJeUBrNMIUcXsAIfAe+Q1oVs1kQVMcLvExSIu8EJclza9v1FSntONE=
    - secure: mUuSfeBwU2lj5DIqQbVxbfDi4pdChtl0Zgp0giuLoTKMHaNZoQJB2NtK3P0bCugnv4HmDisr9+ZfJ5uQuDZaj0Cba0KbXMLeV5TUk8psRa75N+A7ZPQ2YyX8Il1aAZAAWabX1oE9y04ajqX7sYBfwIvg+Fi4+LqSPisjcPj82whOrnsEnQCS8k+i/vEvLF7X78bunU28FoNAhxH2bXa6pRipmfgsbdeYU0L/FDjfU21SO6/WVgvPBb4lMXtlXaYR9DeGGLv1U9y86nhJBHGfSyPRj/fcWiQkyofmX69uKyedZLn9iiCm8zNAlerC3I6wcypVxb+FmsOReG6IARTvf8s6iQ2Q8GRFPqMK3eMGmLDlUWhBXY+edGYuEnOUcty39cnL3WaZxuP2kAbQgg5HB5CaKOmNLDS3wMQw7BI3ao2FjB6akUlBEZbHf6d/OILCExBXj38iCKCToLGWme5M0vqIkIhgT3q1cdXxC9NsxHyxabtgKDQJ42Y+64Po0I+Nf9byxv9TF49dvjwOD5S7NnEOFJcCcIRvLlxdNQvq52aS1f2dbs8TlWK2PCfdyKUjAawzmCo6O2G44cVL4kcbEEGjKYM2XQ6icgq5ZM/FXDECBAvK3Y0gPzNEv2D3Byp9p8TkQEV8pR3NIVzZqPZhAOtVRWQAJnzsCmT23ZYt0w0=
    - CLOUDFRONT_DISTRIBUTION_ID=E1Q1GNVQ0NNUN2
go_import_path: github.com/lvnacapital/algorand
before_install:
  - python3 --version
  - pip --version
  - go get -u github.com/mitchellh/gox
  - go get -u golang.org/x/lint/golint
  - go get -u github.com/sqs/goreturns
  - pip install awscli --upgrade --user
script:
  - make -r all
deploy:
  provider: s3
  access_key_id: $AWS_ACCESS_KEY_ID
  secret_access_key: $AWS_SECRET_ACCESS_KEY
  bucket: lvnacapital
  local-dir: build
  upload-dir: algorand
  acl: public_read
  region: us-west-2
  skip_cleanup: true
  detect_encoding: false
  # default_text_charset: utf-8
  cache_control: no-cache
  dot_match: true
  # endpoint: https://sfo2.digitaloceanspaces.com
  on:
    repo: lvnacapital/algorand-go
    branch: master
    go: 1.12.x
after_deploy:
  - aws configure set preview.cloudfront true
  - test $TRAVIS_BRANCH = 'master' && aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_DISTRIBUTION_ID --paths /algorand
